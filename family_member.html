<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶æ—ã‚¢ãƒ«ãƒãƒ vivi - å®¶æ—è¨­å®š</title>
    <link rel="stylesheet" href="vivi_family_style.css">
    <style>
        /* ğŸ’¡ ä»Šå›ã®ä¿®æ­£ç”¨ã®è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« */
        
        /* ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’Flexboxã«ã—ã¦æ¨ªä¸¦ã³ã‚’æ•´ãˆã‚‹ */
        .member-item {
            display: flex !important;
            justify-content: space-between;
            align-items: center;
            padding: 15px !important;
        }

        /* åå‰ãªã©ã®æƒ…å ±ã‚¨ãƒªã‚¢ã‚’åºƒã’ã‚‹ */
        .member-item .info {
            flex-grow: 1;
            cursor: pointer;
        }

        /* ãƒœã‚¿ãƒ³ã‚’ã¾ã¨ã‚ã‚‹ã‚¨ãƒªã‚¢ */
        .action-area {
            display: flex;
            gap: 10px; /* ãƒœã‚¿ãƒ³åŒå£«ã®é–“éš” */
            align-items: center;
        }

        /* ã€Œç·¨é›†ã€ã€Œå‰Šé™¤ã€ãƒ†ã‚­ã‚¹ãƒˆãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .text-btn {
            padding: 6px 12px;
            font-size: 0.9em;
            border-radius: 6px;
            cursor: pointer;
            background-color: #fff;
            font-weight: bold;
            transition: all 0.2s;
        }

        /* ç·¨é›†ãƒœã‚¿ãƒ³ã®è‰²è¨­å®š */
        .text-btn.edit {
            border: 1px solid var(--primary-color, #6ec6ff);
            color: var(--primary-color, #6ec6ff);
        }
        .text-btn.edit:hover {
            background-color: var(--primary-color, #6ec6ff);
            color: #fff;
        }

        /* å‰Šé™¤ãƒœã‚¿ãƒ³ã®è‰²è¨­å®š */
        .text-btn.delete {
            border: 1px solid var(--danger-color, #e74c3c);
            color: var(--danger-color, #e74c3c);
        }
        .text-btn.delete:hover {
            background-color: var(--danger-color, #e74c3c);
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="top-bar">
            <div class="header-left"></div> 
            <div class="header-center"><h1>å®¶æ—è¨­å®š</h1></div>
            <div class="header-right">
                <a href="album_setting.html" class="nav-item"><span class="icon">âš™ï¸</span></a>
            </div>
        </header>

        <nav class="member-tabs">
            <button class="tab active" onclick="showSection('family', this)">å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼</button>
            <button class="tab" onclick="showSection('kids', this)">å­ã©ã‚‚æƒ…å ±</button>
        </nav>

        <main class="main-content">
            <section id="family-section" class="member-section active">

                <button class="add-button primary-button" onclick="location.href='member_add.html'">
                    <span class="icon">ï¼‹</span> æ–°ã—ã„å®¶æ—ã‚’æ‹›å¾…ã™ã‚‹
                </button>
                <h2 class="section-title">ç™»éŒ²ãƒ¡ãƒ³ãƒãƒ¼</h2>
                <ul class="member-list">
                    <li class="member-item">
                        <div class="info" onclick="location.href='member_detail.html?id=1'">
                            <p><span class="name">ç§ã®åå‰ (çˆ¶)</span></p>
                            <p><span class="role">ç®¡ç†è€…</span></p>
                        </div>
                        <div class="action-area">
                            <button class="text-btn edit" onclick="event.stopPropagation(); location.href='member_edit.html?id=1'">ç·¨é›†</button>
                            <button class="text-btn delete" onclick="event.stopPropagation(); showDeleteModal('ç§ã®åå‰ (çˆ¶)', '1')">å‰Šé™¤</button>
                        </div>
                    </li>

                    <li class="member-item">
                        <div class="info" onclick="location.href='member_detail.html?id=2'">
                            <p><span class="name">å¦»ã®åå‰ (æ¯)</span></p>
                            <p><span class="role">æŠ•ç¨¿å¯èƒ½</span></p>
                        </div>
                        <div class="action-area">
                            <button class="text-btn edit" onclick="event.stopPropagation(); location.href='member_edit.html?id=2'">ç·¨é›†</button>
                            <button class="text-btn delete" onclick="event.stopPropagation(); showDeleteModal('å¦»ã®åå‰ (æ¯)', '2')">å‰Šé™¤</button>
                        </div>
                    </li>
                </ul>

                <div class="permission-info-box">
                    <h3 class="permission-title">æ¨©é™ã«ã¤ã„ã¦</h3>
                    <div class="permission-item">
                        <span class="permission-label admin">ç®¡ç†è€…</span>
                        <p class="permission-desc">ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’å¤šç”¨å¯èƒ½ï¼ˆå®¶æ—è¨­å®šã€å‰Šé™¤ãªã©ï¼‰</p>
                    </div>
                    <div class="permission-item">
                        <span class="permission-label post">æŠ•ç¨¿å¯èƒ½</span>
                        <p class="permission-desc">å†™çœŸãƒ»å‹•ç”»ã®æŠ•ç¨¿ã€ã‚³ãƒ¡ãƒ³ãƒˆã€ã‚¿ã‚°ã¥ã‘ãŒå¯èƒ½</p>
                    </div>
                    <div class="permission-item">
                        <span class="permission-label view">é–²è¦§ã®ã¿</span>
                        <p class="permission-desc">å†™çœŸãƒ»å‹•ç”»ã®é–²è¦§ã¨ã‚³ãƒ¡ãƒ³ãƒˆé–²è¦§ã®ã¿å¯èƒ½</p>
                    </div>
                </div>

            </section>

            <section id="kids-section" class="member-section" style="display: none;">
                <button class="add-button primary-button" onclick="location.href='kids_add.html'">
                    <span class="icon">ï¼‹</span> æ–°ã—ã„å­ã©ã‚‚ã‚’ç™»éŒ²ã™ã‚‹
                </button>
                <h2 class="section-title">ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å­ã©ã‚‚</h2>

                <ul class="member-list">
                    <li class="member-item" onclick="location.href='kids_info.html?id=a'">
                        <div class="info">
                            <span class="name">Aã¡ã‚ƒã‚“ (é•·å¥³)</span><br>
                            <span class="role">4æ­³ | æˆé•·è¨˜éŒ²ã‚’è¦‹ã‚‹</span>
                        </div>
                    </li>
                    <li class="member-item" onclick="location.href='kids_info.html?id=b'">
                        <div class="info">
                            <span class="name">Bãã‚“ (é•·ç”·)</span><br>
                            <span class="role">2æ­³ | æˆé•·è¨˜éŒ²ã‚’è¦‹ã‚‹</span>
                        </div>
                    </li>
                </ul>
            </section>

        </main>

        <nav class="bottom-nav">
            <a href="top.html" class="nav-item"><span class="icon">ğŸ–¼ï¸</span>ã‚¢ãƒ«ãƒãƒ </a>
            <a href="height_measure.html" class="nav-item"><span class="icon">ğŸ“·</span>ã‚«ãƒ¡ãƒ©</a>
            <a href="family_member.html" class="nav-item active"><span class="icon">ğŸ‘ª</span>å®¶æ—</a>
        </nav>
    </div>

    <div id="delete-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <p id="modal-message">ãƒ¡ãƒ³ãƒãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</p>
            <div class="modal-buttons">
                <button class="button-yes" onclick="deleteMemberConfirmed()">ã¯ã„</button>
                <button class="button-no" onclick="hideDeleteModal()">ã„ã„ãˆ</button>
            </div>
        </div>
    </div>

    <script>
        let memberToDeleteId = null;

        function showSection(sectionId, element) {
            document.querySelectorAll('.member-tabs .tab').forEach(tab => tab.classList.remove('active'));
            const targetTab = element || document.getElementById(`tab-${sectionId}`);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            document.querySelectorAll('.member-section').forEach(section => section.style.display = 'none');
            document.getElementById(`${sectionId}-section`).style.display = 'block';
        }

        function showDeleteModal(memberName, memberId) {
            memberToDeleteId = memberId;
            document.getElementById('modal-message').textContent = `ãƒ¡ãƒ³ãƒãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`;
            document.getElementById('delete-modal').style.display = 'flex';
        }

        function hideDeleteModal() {
            memberToDeleteId = null;
            document.getElementById('delete-modal').style.display = 'none';
        }

        function deleteMemberConfirmed() {
            if (memberToDeleteId) {
                // å‰Šé™¤å¯¾è±¡ã®è¡Œã‚’ç‰¹å®šã—ã¦å‰Šé™¤
                // æ³¨æ„: classæ§‹é€ ãŒå¤‰ã‚ã£ãŸãŸã‚ã€è¦ªè¦ç´ ã®å–å¾—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¿®æ­£
                const deleteBtn = document.querySelector(`.text-btn.delete[onclick*="'${memberToDeleteId}')"]`);
                if(deleteBtn) {
                    const memberElement = deleteBtn.closest('.member-item');
                    if (memberElement) memberElement.remove();
                }
            }
            hideDeleteModal(); 
        }

        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const activeTabParam = urlParams.get('tab');
            const initialSectionId = (activeTabParam === 'kid') ? 'kids' : 'family';
            showSection(initialSectionId, null); 
        });
    </script>
</body>
</html>
