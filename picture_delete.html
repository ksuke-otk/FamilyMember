<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†™çœŸå‰Šé™¤</title>
    <link rel="stylesheet" href="vivi_album_style.css">
</head>
<body>
    <div class="app-container">
        
        <header class="top-bar">
            <div class="header-left">
                <a href="picture_detail.html" class="icon-button back-button">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
            </div>
            <div class="header-center"><h1>å†™çœŸå‰Šé™¤</h1></div>
            <div class="header-right">
                </div>
        </header>

        <main class="main-content form-page">
            <p class="description-text">å‰Šé™¤ã—ãŸã„å†™çœŸã‚’é¸æŠã—ã€ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚<br>ï¼ˆã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ï¼‰</p>

            <div class="delete-selection-area">
                <div class="select-all-group">
                    <label>
                        <input type="checkbox" id="select-all-photos" onclick="toggleSelectAll()">
                        ã™ã¹ã¦é¸æŠ
                    </label>
                    <span class="photo-count">é¸æŠä¸­: <span id="selected-count">1</span>æš</span>
                </div>
                
                <hr style="border-top: 1px solid var(--border-color); margin: 15px 0;">

                <div class="photo-list" id="photo-delete-list">
                    <div class="photo-item">
                        <label class="photo-select-label">
                            <input type="checkbox" name="delete_photo" value="1" >
                        </label>
                        <div class="photo-details">
                            <img src="path/to/photo_detail_image.jpg" alt="å†™çœŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼" class="photo-thumbnail">
                        </div>
                    </div>

                    <div class="photo-item">
                        <label class="photo-select-label">
                            <input type="checkbox" name="delete_photo" value="2">
                        </label>
                        <div class="photo-details">
                            <img src="path/to/another_photo.jpg" alt="å†™çœŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼" class="photo-thumbnail">
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" class="danger-button primary-button" style="margin-top: 30px; margin-bottom: 40px;" onclick="showDeleteConfirmation()">
                é¸æŠã—ãŸå†™çœŸã‚’å‰Šé™¤
            </button>
            
            <div id="delete-modal" class="modal-overlay" style="display:none;">
                <div class="modal-content">
                    <p id="delete-modal-message">
                        é¸æŠã—ãŸå†™çœŸã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ
                        <br>ã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚
                    </p>
                    <div class="modal-buttons">
                        <button class="button-yes" onclick="deleteConfirmed()">ã¯ã„</button>
                        <button class="button-no" onclick="hideDeleteModal()">ã„ã„ãˆ</button>
                    </div>
                </div>
            </div>

        </main>
        
        <nav class="bottom-nav">
            <a href="top.html" class="nav-item active"><span class="icon">ğŸ–¼ï¸</span>ã‚¢ãƒ«ãƒãƒ </a>
            <a href="height_measure.html" class="nav-item"><span class="icon">ğŸ“·</span>ã‚«ãƒ¡ãƒ©</a>
            <a href="family_member.html" class="nav-item"><span class="icon">ğŸ‘ª</span>å®¶æ—</a>
        </nav>

    </div>
    <script>
        // ----------------------------------------------------
        // ğŸ’¡ å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†
        // ----------------------------------------------------
        function showDeleteConfirmation() {
        // å‰Šé™¤å¯¾è±¡ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
             const checkedCount = document.querySelectorAll('input[name="delete_photo"]:checked').length;
        if (checkedCount === 0) {
               alert("å‰Šé™¤ã™ã‚‹å†™çœŸã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
                return;
        }
    
            const messageElement = document.getElementById('delete-modal-message');
            messageElement.innerHTML = `é¸æŠã—ãŸå†™çœŸï¼ˆ${checkedCount}æšï¼‰ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ<br>ã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚`;

            document.getElementById('delete-modal').style.display = 'flex';
        }

        function hideDeleteModal() {
           document.getElementById('delete-modal').style.display = 'none';
        }

        function deleteConfirmed() {
        // å®Ÿéš›ã®å‰Šé™¤å‡¦ç†ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
            console.log('é¸æŠã•ã‚ŒãŸå†™çœŸã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
           // alert('å†™çœŸã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
    
        // ğŸ’¡ ã€ã“ã“ã‹ã‚‰è¿½åŠ ãƒ»ä¿®æ­£ã€‘å‰Šé™¤å¾Œã«ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ 
            const selectAllCheckbox = document.getElementById('select-all-photos');
            const photoCheckboxes = document.querySelectorAll('input[name="delete_photo"]');
 
        // 1. å…¨é¸æŠãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
        if (selectAllCheckbox) {
             selectAllCheckbox.checked = false;
        }

         // 2. å€‹åˆ¥ã®å†™çœŸãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
             photoCheckboxes.forEach(checkbox => {
             checkbox.checked = false;
        });

        // 3. é¸æŠæšæ•°è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆ0ã«ã™ã‚‹ï¼‰
            updateSelectedCount(); // ã“ã‚Œã‚’å‘¼ã¶ã“ã¨ã§è‡ªå‹•çš„ã«0æšã¨è¡¨ç¤ºã•ã‚Œã‚‹
        // ğŸ’¡ ã€ã“ã“ã¾ã§è¿½åŠ ãƒ»ä¿®æ­£ã€‘

        // å‰Šé™¤å¾Œã€å†™çœŸè©³ç´°ç”»é¢ã«æˆ»ã‚‹ï¼ˆã¾ãŸã¯ã‚¢ãƒ«ãƒãƒ ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹ï¼‰
            location.href = 'picture_delete.html'; 
        }

        // ----------------------------------------------------
        // ğŸ’¡ å…¨é¸æŠ/å…¨è§£é™¤ã®ãƒˆã‚°ãƒ«
        // ----------------------------------------------------
        function toggleSelectAll() {
            const selectAllCheckbox = document.getElementById('select-all-photos');
            const photoCheckboxes = document.querySelectorAll('input[name="delete_photo"]');
            const isChecked = selectAllCheckbox.checked;

            photoCheckboxes.forEach(checkbox => {
                checkbox.checked = isChecked;
            });
            updateSelectedCount();
        }

        // ----------------------------------------------------
        // ğŸ’¡ é¸æŠæšæ•°ã®æ›´æ–°
        // ----------------------------------------------------
        function updateSelectedCount() {
            const checkedCount = document.querySelectorAll('input[name="delete_photo"]:checked').length;
            document.getElementById('selected-count').textContent = checkedCount;

            // ã™ã¹ã¦é¸æŠãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã‚’æ›´æ–°
            const photoCheckboxes = document.querySelectorAll('input[name="delete_photo"]');
            const totalCount = photoCheckboxes.length;
            document.getElementById('select-all-photos').checked = (checkedCount === totalCount && totalCount > 0);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // å„å†™çœŸã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
            const photoCheckboxes = document.querySelectorAll('input[name="delete_photo"]');
            photoCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateSelectedCount);
            });
            updateSelectedCount(); // åˆæœŸè¡¨ç¤ºæ™‚ã®ã‚«ã‚¦ãƒ³ãƒˆã‚’æ›´æ–°
        });
    </script>
</body>
</html>
